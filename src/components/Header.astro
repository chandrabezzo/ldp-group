---
import logo from '../assets/1. LDP GROUP.png';
import LanguageSwitcher from './LanguageSwitcher.astro';
import { getI18n } from "../utils/i18n";
const i18n = getI18n();
const t = i18n.t.bind(i18n);
---

<header class="header">
	<nav class="nav container">
		<a href="/" class="logo-link">
			<img src={logo.src} alt="LDP Group Logo" class="logo" />
		</a>
		<div class="nav-links">
			<a href="#about">{t("nav.about")}</a>
			<a href="#services">{t("nav.services")}</a>
			<a href="#contact" class="btn-primary">{t("nav.contact")}</a>
		</div>
		<LanguageSwitcher />
		<button class="menu-toggle" aria-label="Toggle menu">
			<span></span>
			<span></span>
			<span></span>
		</button>
	</nav>
</header>

<style>
	.header {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		background: rgba(255, 255, 255, 0.95);
		backdrop-filter: blur(10px);
		box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
		z-index: 1000;
		transition: var(--transition);
	}

	.nav {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3);
	}

	.logo-link {
		display: flex;
		align-items: center;
	}

	.logo {
		height: 50px;
		width: auto;
		transition: var(--transition);
	}

	.logo:hover {
		transform: scale(1.05);
	}

	.nav-links {
		display: flex;
		gap: calc(var(--spacing-unit) * 3);
		align-items: center;
	}

	.nav-links a {
		font-weight: 500;
		font-size: 1rem;
		transition: var(--transition);
		position: relative;
	}

	.nav-links a:not(.btn-primary)::after {
		content: '';
		position: absolute;
		bottom: -4px;
		left: 0;
		width: 0;
		height: 2px;
		background: var(--color-primary);
		transition: width 0.3s ease;
	}

	.nav-links a:not(.btn-primary):hover::after {
		width: 100%;
	}

	.btn-primary {
		background: var(--color-primary);
		color: white;
		padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 3);
		border-radius: 8px;
		font-weight: 600;
		transition: var(--transition);
	}

	.btn-primary:hover {
		background: var(--color-secondary);
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
	}

	.menu-toggle {
		display: none;
		flex-direction: column;
		gap: 4px;
		background: none;
		border: none;
		cursor: pointer;
		padding: 8px;
	}

	.menu-toggle span {
		width: 25px;
		height: 3px;
		background: var(--color-text);
		border-radius: 3px;
		transition: var(--transition);
	}

	@media (max-width: 768px) {
		.nav-links {
			position: fixed;
			top: 70px;
			right: -100%;
			flex-direction: column;
			background: white;
			width: 250px;
			padding: calc(var(--spacing-unit) * 4);
			box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
			transition: right 0.3s ease;
			height: calc(100vh - 70px);
		}

		.menu-toggle {
			display: flex;
		}

		.logo {
			height: 40px;
		}
	}
</style>

<script>
	const menuToggle = document.querySelector('.menu-toggle');
	const navLinks = document.querySelector('.nav-links');

	menuToggle?.addEventListener('click', () => {
		const isOpen = navLinks?.style.right === '0px';
		if (navLinks) {
			navLinks.style.right = isOpen ? '-100%' : '0px';
		}
	});

	document.querySelectorAll('.nav-links a').forEach(link => {
		link.addEventListener('click', () => {
			if (navLinks && window.innerWidth <= 768) {
				navLinks.style.right = '-100%';
			}
		});
	});
</script>
